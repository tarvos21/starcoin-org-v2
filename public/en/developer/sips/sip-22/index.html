<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name=viewport><meta id=i18n_pagename content="index-common"><link rel=icon type=image/svg href=/img/stc.svg><link rel=stylesheet type=text/css href=/css/bootstrap.css><link rel=stylesheet href=/css/swiper-bundle.css><link rel=stylesheet type=text/css href=/css/nav.css><link rel=stylesheet type=text/css href=/css/nav_developer.css><link rel=stylesheet type=text/css href=/css/banner.css><link rel=stylesheet type=text/css href=/css/font_en.css><link rel=stylesheet type=text/css href=/css/footer.css><link rel=stylesheet type=text/css href=/css/developer.css><link rel=stylesheet type=text/css href=/css/markdown.css><script src=/js/jquery.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/swiper-bundle.min.js></script><script>(function(c,d){const b=196;function a(){const a=document.documentElement.clientWidth/1920,c=b*Math.min(a,2);document.documentElement.style.fontSize=c+'px'}a(),addEventListener('resize',a,!1)})(document,window)</script><script>$(document).ready(function(){a(),$(window).resize(function(){a()}),$(function(){$('.footer [data-toggle="tooltip"]').tooltip({})});function a(){window.innerWidth<=768?($(".m-d-title").css("width",document.body.clientWidth-30+'px'),$(".m-d-content").css("width",document.body.clientWidth-30+'px'),$(".developer").css("marginLeft","-221px")):($(".m-d-title").css("width","auto"),$(".m-d-content").css("width","auto"),$(".developer").css("marginLeft","auto"))}$("#developer_open_move").click(function(){$(this).parent().attr("class").indexOf("active")>-1?($(this).find(".icon img").attr("src","/img/icon_block.png"),$(this).parent().removeClass("active")):($(this).find(".icon img").attr("src","/img/icon_block_active.png"),$(this).parent().addClass("active"))}),$(".m_left_nav_click").click(function(){$(this).attr("state")==0?($(this).attr("state",1),$(".m_mask").show(),$(".m-column-drawer").animate({marginLeft:"100px"})):($(this).attr("state",0),$(".m_mask").hide(),$(".m-column-drawer").animate({marginLeft:"-212px"}))}),$(".m_mask").click(function(){$(this).hide(),$(".m_left_nav_click").attr("state",0),$(".m-column-drawer").animate({marginLeft:"-212px"})})})</script><title>[SIP22] NFT | Starcoin</title></head><body><div class=hidden-xs><div class=header_top></div><div class="top scrollTop-nav"><div class=container><a href=/en><div class=logo><img src=/img/logo.png></div></a><div class=top-right><div class="nav navClick"><div class="item Overview allSelect"><span class=i18n href=/en/>Overview</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/downloads/Starcoin_en.pdf target=_blank>Starcoin
& Move</a></div><div class=li><a class=i18n href=/en/overview/technology_whitepaper/>Technology Whitepaper</a></div><div class=li><a class=i18n href=/en/overview/economy_whitepaper/>Economy Whitepaper</a></div></div></div></div><div class="item Guide allSelect"><span class=i18n>Learn</span><div class=more_nav><div class=box><div class=li><a class=i18n href=https://github.com/starcoinorg/starmask-extension/blob/main/docs/how-to-use.md target=_blank>StarMask Chrome Wallet</a></div><div class=li><a class=i18n href=/en/developer/cli/mint/>Node Mining</a></div><div class=li><a class=i18n href=/en/developer/cli/>Node Command</a></div></div></div></div><div class="item Developer allSelect"><span class=i18n>Developer</span><div class=more_nav><div class=box><div class=li><span class=i18n>Get Started</span><div class=second_nav><div class=li><a class=i18n href=/en/developer/setup/install target=_blank>Install</a></div><div class=li><a class=i18n href=/en/developer/setup/build target=_blank>Build from Source</a></div><div class=li><a class=i18n href=/en/developer/setup/run_by_docker target=_blank>Run by Docker</a></div><div class=li><a class=i18n href=/en/developer/setup/runnetwork target=_blank>Run/Join Network</a></div></div></div><div class=li><span class=i18n>Node</span><div class=second_nav><div class=li><a class=i18n href=/en/developer/key_concepts/concept>Key Concept</a></div><div class=li><a class=i18n href=/en/developer/rpc/rpc_document/>RPC Protocol & APIs</a></div><div class=li><a class=i18n href=/en/developer/sips/>SIPs</a></div><div class=li><a class=i18n href=/en/developer/sdk/>SDK</a></div></div></div><div class=li><span class=i18n>Move</span><div class=second_nav><div class=li><a class=i18n href=https://move-book.com/cn/index.html target=_blank>Move Book</a></div><div class=li><a class=i18n href=https://github.com/starcoinorg/starcoin/blob/master/vm/move-cli/README.md target=_blank>Move IDE</a></div><div class=li><a class=i18n href=https://github.com/starcoinorg/starcoin/blob/master/vm/move-cli/README.zh.md target=_blank>Move CLI</a></div><div class=li><a class=i18n href=/en/developer/move/example>Move Examples</a></div></div></div><div class=li><span class=i18n>Stratum Pool Guide</span><div class=second_nav><div class=li><a class=i18n href=https://github.com/starcoinorg/starcoin/discussions/2541 target=_blank>Stratum Pool Guide</a></div><div class=li><a class=i18n href=https://github.com/starcoinorg/starcoin/blob/b47429fc792fe9fabd1587fa60a9cae249f0b67f/stratum/stratum_mining_protocol.md target=_blank>Stratum mining protocol</a></div></div></div><div class=li><a class=i18n href=/en/developer/>More</a></div></div></div></div><div class="item Community allSelect"><span class=i18n>Community</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/en/news/>News</a></div><div class=li><a class=i18n href=https://westar.io target=_blank>Westar Labs</a></div><div class=li><a class=i18n href=https://www.movelang.io target=_blank>Move Chinese Community</a></div><div class=li><a class=i18n href=https://stcscan.io target=_blank>Starcoin Explorer</a></div><div class=li><a class=i18n href=https://poll.starcoin.org target=_blank>Starcoin Polls</a></div></div></div></div><div class="item About allSelect"><a class=i18n href=/en/about><span class=i18n>About</span></a></div><div class="item Language allSelect hidden-xs"><div class=language-box><span class=i18n><img src=/img/icon_en.png alt>en</span></div><div class=more_nav><div class=box><div class="li nav-language"><div language=zh class=item><img src=/img/icon_zh.png alt>
中文</div></div><div class="li nav-language"><div language=en class=item><img src=/img/icon_en.png alt>
English</div></div></div></div></div><script>$(document).ready(function(){$(".nav-language .item").click(function(){let a=window.location.href,b=$(this).attr('language'),c="en";c!==b&&(a=a.replace(`/${c}/`,`/${b}/`),window.location.href=a)})})</script></div></div></div></div></div><div class=visible-xs style=display:block><div class="header_top m_header_top"></div><div class="top m_top scrollTop-nav"><div class="container m_container"><a href=/><div class=m_logo><img src=/img/logo.png></div></a><div class="m_nav m_nav_tap"><img src=/img/m_nav_more.png></div></div></div><div class=m_nav_model><div class="nav navClick m_nav_navigation"><div class="item Overview allSelect"><span class=i18n href=/en/>Overview</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/downloads/Starcoin_en.pdf target=_blank>Starcoin
& Move</a></div><div class=li><a class=i18n href=/en/overview/technology_whitepaper/>Technology Whitepaper</a></div><div class=li><a class=i18n href=/en/overview/economy_whitepaper/>Economy Whitepaper</a></div></div></div></div><div class="item Guide allSelect"><span class=i18n>Learn</span><div class=more_nav><div class=box><div class=li><a class=i18n href=https://github.com/starcoinorg/starmask-extension/blob/main/docs/how-to-use.md target=_blank>StarMask Chrome Wallet</a></div><div class=li><a class=i18n href=/en/developer/cli/mint/>Node Mining</a></div><div class=li><a class=i18n href=/en/developer/cli/>Node Command</a></div></div></div></div><div class="item Developer allSelect"><span class=i18n>Developer</span><div class=more_nav><div class=box><div class=li><span class=i18n>Get Started</span><div class=second_nav><div class=li><a class=i18n href=/en/developer/setup/install target=_blank>Install</a></div><div class=li><a class=i18n href=/en/developer/setup/build target=_blank>Build from Source</a></div><div class=li><a class=i18n href=/en/developer/setup/run_by_docker target=_blank>Run by Docker</a></div><div class=li><a class=i18n href=/en/developer/setup/runnetwork target=_blank>Run/Join Network</a></div></div></div><div class=li><span class=i18n>Node</span><div class=second_nav><div class=li><a class=i18n href=/en/developer/key_concepts/concept>Key Concept</a></div><div class=li><a class=i18n href=/en/developer/rpc/rpc_document/>RPC Protocol & APIs</a></div><div class=li><a class=i18n href=/en/developer/sips/>SIPs</a></div><div class=li><a class=i18n href=/en/developer/sdk/>SDK</a></div></div></div><div class=li><span class=i18n>Move</span><div class=second_nav><div class=li><a class=i18n href=https://move-book.com/cn/index.html target=_blank>Move Book</a></div><div class=li><a class=i18n href=https://github.com/starcoinorg/starcoin/blob/master/vm/move-cli/README.md target=_blank>Move IDE</a></div><div class=li><a class=i18n href=https://github.com/starcoinorg/starcoin/blob/master/vm/move-cli/README.zh.md target=_blank>Move CLI</a></div><div class=li><a class=i18n href=/en/developer/move/example>Move Examples</a></div></div></div><div class=li><span class=i18n>Stratum Pool Guide</span><div class=second_nav><div class=li><a class=i18n href=https://github.com/starcoinorg/starcoin/discussions/2541 target=_blank>Stratum Pool Guide</a></div><div class=li><a class=i18n href=https://github.com/starcoinorg/starcoin/blob/b47429fc792fe9fabd1587fa60a9cae249f0b67f/stratum/stratum_mining_protocol.md target=_blank>Stratum mining protocol</a></div></div></div><div class=li><a class=i18n href=/en/developer/>More</a></div></div></div></div><div class="item Community allSelect"><span class=i18n>Community</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/en/news/>News</a></div><div class=li><a class=i18n href=https://westar.io target=_blank>Westar Labs</a></div><div class=li><a class=i18n href=https://www.movelang.io target=_blank>Move Chinese Community</a></div><div class=li><a class=i18n href=https://stcscan.io target=_blank>Starcoin Explorer</a></div><div class=li><a class=i18n href=https://poll.starcoin.org target=_blank>Starcoin Polls</a></div></div></div></div><div class="item About allSelect"><a class=i18n href=/en/about><span class=i18n>About</span></a></div><div class="item Language allSelect hidden-xs"><div class=language-box><span class=i18n><img src=/img/icon_en.png alt>en</span></div><div class=more_nav><div class=box><div class="li nav-language"><div language=zh class=item><img src=/img/icon_zh.png alt>
中文</div></div><div class="li nav-language"><div language=en class=item><img src=/img/icon_en.png alt>
English</div></div></div></div></div><script>$(document).ready(function(){$(".nav-language .item").click(function(){let a=window.location.href,b=$(this).attr('language'),c="en";c!==b&&(a=a.replace(`/${c}/`,`/${b}/`),window.location.href=a)})})</script></div><div class=m-language><div language=zh class=item>中文<div class=line></div></div><div language=en class=item>English</div></div></div><div class=clearfix></div></div><script>$(document).ready(function(){const a=JSON.parse(localStorage.getItem('navActive'))||0;$(".navClick .item")[a].classList.add('navActive'),$(".p-language span, .m-language .item").click(function(){let a=window.location.href,b=$(this).attr('language'),c="en";c!==b&&(a=a.replace(`/${c}/`,`/${b}/`),window.location.href=a)}),$(".navClick .item").click(function(){let b=$(this)[0]||null;if(b){b.classList.add('navActive');let e=[],d=b.parentNode.children;for(var a=0,c=d.length;a<c;a++)d[a]!==b?e.push(d[a]):localStorage.setItem('navActive',a);e.forEach(a=>{a.classList.remove('navActive')})}$(this).attr("href")&&window.open($(this).attr("href"),"_self")}),$(".more_nav .box .li").click(function(){$(this).attr("href")&&window.open($(this).attr("href"),"_self")}),$(".m_nav_navigation").find(".allSelect").click(function(){$(this).attr("class").indexOf("m_tab_select")>-1?(console.log($(this)),$(this).removeClass("m_tab_select")):$(this).addClass("m_tab_select")}),$(".m_nav_tap").click(function(){$(this).find("img").attr("src")=="/img/m_nav_more.png"?($(this).find("img").attr("src","/img/m_nav_close.png"),$(".m_nav_model").show(),$(".m_nav_model").animate({height:"100%"}),$(".scrollTop-nav").addClass("home-nav")):($(this).find("img").attr("src","/img/m_nav_more.png"),$(".scrollTop-nav").removeClass("home-nav"),$(".m_nav_model").animate({height:"0%"}),$(".m_nav_model").hide())})})</script><div class=container><div class="developer m-column-drawer"><div class=developer_left><div class=developer_column>Starcoin</div><div class=developer_column_list><div class=developer_search><div class=search><div class=icon><img src=/img/search.png></div><input type=text placeholder=搜索 name=fname></div></div><ul><li><a href=/en/developer/setup/>Getting started</a><ul><li><a href=/en/developer/setup/install/>Install</a></li><li><a href=/en/developer/setup/build/>Build from Source</a></li><li><a href=/en/developer/setup/run_by_docker/>Run by docker</a></li><li><a href=/en/developer/setup/runnetwork/>Run/Join Network</a></li><li><a href=/en/developer/setup/runcustomnetwork/>Run custom chain network</a></li></ul></li><li><a href=/en/developer/cli/ class=arrow>CLI</a></li><li><a href=/en/developer/tutorials/ class=arrow>Tutorials</a></li><li><a href=/en/developer/move/ class=arrow>Move language</a></li><li><a href=/en/developer/key_concepts/ class=arrow>Key Concepts</a></li><li><a href=/en/developer/rpc/>RPC</a><ul><li><a href=/en/developer/rpc/rpc_document/>JSON RPC API schema</a></li><li><a href=/en/developer/rpc/postman_document/>Postman Guide</a></li></ul></li><li><a href=/en/developer/sdk/>SDK</a><ul></ul></li><li><a href=/en/developer/account/ class=arrow>Starcoin Account Introduction</a></li><li><a href=/en/developer/sips/sip-21/>[SIP21] Receipt Identifier</a></li><li><a href=/en/developer/sips/sip-22/ class=active>[SIP22] NFT</a></li><li><a href=/en/developer/tech/ class=arrow>Tech</a></li><li><a href=/en/developer/release-notes/ class=arrow>Release Notes</a></li><li><a href=/en/developer/protocols/starcoin_nft/>NFT Protocol</a></li></ul></div></div><div class=developer_right><div class=m_mask></div><div class="column_title m-d-title"><img class=m_left_nav_click state=0 src=/img/m_nav_more.png>
<span>[SIP22] NFT</span></div><div class="content m-d-content"><article class=markdown><h2 id=nft>NFT</h2><p>NFT implementation and extension protocol</p><h2 id=motivation>Motivation</h2><p>In smart contracts, Tokens are used to represent fungible digital resources, while NFTs are needed to represent non-fungible resources. in Move, any instance of a type that cannot be copied and dropped can be considered a non-fungible resource and is an NFT. But NFTs need a standard for uniform presentation and collecting and transferring , so the design of this standard.</p><h2 id=objectives>Objectives</h2><p>To provide a common, extensible NFT standard, and providing a basic implementation of NFT-related operations.</p><h2 id=type-definition>Type Definition</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>NFT</span><span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span> has store {
        <span style=color:#e6db74>/// The creator of NFT
</span><span style=color:#e6db74></span>        creator: <span style=color:#a6e22e>address</span>,
        <span style=color:#e6db74>/// The unique id of NFT under NFTMeta type
</span><span style=color:#e6db74></span>        id: <span style=color:#66d9ef>u64</span>,
        <span style=color:#e6db74>/// The metadata of NFT
</span><span style=color:#e6db74></span>        base_meta: <span style=color:#a6e22e>Metadata</span>,
        <span style=color:#e6db74>/// The extension metadata of NFT
</span><span style=color:#e6db74></span>        type_meta: <span style=color:#a6e22e>NFTMeta</span>,
        <span style=color:#e6db74>/// The body of NFT, NFT is a box for NFTBody
</span><span style=color:#e6db74></span>        body: <span style=color:#a6e22e>NFTBody</span>,
}
</code></pre></div><p>NFT is a Move type that supports store ability, but not copy and drop, and contains some basic meta-information:</p><ol><li>creator: address of the NFT creator.</li><li>id: the unique id under this NFT type.</li><li>base_meta: basic generic metadata information, mainly used to define how to display NFT.</li><li>type_meta: developer-defined metadata, also used to mark the type of NFT. metadata is not a resource, it represent information, so it supports copy + store + drop.</li><li>body: NFT contains resources, can be used to embed other resources.</li></ol><p>If you think of NFT as a box, NFT itself defines the box&rsquo;s ownership, unique number, and presentation, and NFTBody is the gem encapsulated in the box. Presentation is defined by Metadata.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Metadata</span> has copy, store, drop {
        <span style=color:#e6db74>/// NFT name&#39;s utf8 bytes.
</span><span style=color:#e6db74></span>        name: <span style=color:#a6e22e>vector</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u8</span><span style=color:#f92672>&gt;</span>,
        <span style=color:#e6db74>/// Image link, such as ipfs://xxxx
</span><span style=color:#e6db74></span>        image: <span style=color:#a6e22e>vector</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u8</span><span style=color:#f92672>&gt;</span>,
        <span style=color:#e6db74>/// Image bytes data, image or image_data can not empty for both.
</span><span style=color:#e6db74></span>        image_data: <span style=color:#a6e22e>vector</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u8</span><span style=color:#f92672>&gt;</span>,
        <span style=color:#e6db74>/// NFT description utf8 bytes.
</span><span style=color:#e6db74></span>        description: <span style=color:#a6e22e>vector</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u8</span><span style=color:#f92672>&gt;</span>,
}
</code></pre></div><p>Metadata defines the basic information needed to display the NFT, name, image and description. If there is other information that needs to be extended, it can be defined in the type_meta. Image has two fields to represent, <code>image</code> indicates the image url, <code>image_data</code> can be directly stored in the image binary data, the client use the non-empty field in <code>image</code> and <code>image_data</code> to display the NFT.</p><p>In addition, some type of NFT will use the same image for all instance, in this case, the <code>image</code> and <code>image_data</code> in the NFT metadata can both be empty, the client using the metadata in the NFTTypeInfo.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust> <span style=color:#e6db74>/// The info of NFT type
</span><span style=color:#e6db74></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>NFTTypeInfo</span><span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTTypeInfoExt: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop<span style=color:#f92672>&gt;</span> has key, store {
        counter: <span style=color:#66d9ef>u64</span>,
        meta: <span style=color:#a6e22e>Metadata</span>,
        info: <span style=color:#a6e22e>NFTTypeInfoExt</span>,
        mint_events: <span style=color:#a6e22e>Event</span>::EventHandle<span style=color:#f92672>&lt;</span>MintEvent<span style=color:#f92672>&lt;</span>NFTMeta<span style=color:#f92672>&gt;&gt;</span>,
}
</code></pre></div><p>NFTTypeInfo is used to maintain a counter for the NFT id, as well as the global metata of the NFT type, each NFT type needs to be registered in the registry first.</p><h2 id=method-definition>Method Definition</h2><p>Each NFT type needs to be registered first, and the registration requires the NFT&rsquo;s NFTMeta type and a global metadata for that type.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust>public fun register<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTTypeInfoExt: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop<span style=color:#f92672>&gt;</span>(sender: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>signer</span>, info: <span style=color:#a6e22e>NFTTypeInfoExt</span>, meta: <span style=color:#a6e22e>Metadata</span>)
</code></pre></div><p>After registration, three capabilities representing permissions will be move to the <code>sender</code>&rsquo;s account.</p><ol><li>MintCapability : used to mint the type of NFT</li><li>BurnCapability : used to burn the type of NFT</li><li>UpdateCapability: used to update the type of NFT&rsquo;s metadata</li></ol><p>These three permissions correspond to three methods:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#e6db74>/// Mint NFT，return NFT&#39;s instance
</span><span style=color:#e6db74></span>public fun mint_with_cap<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span>, Info: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop<span style=color:#f92672>&gt;</span>(creator: <span style=color:#a6e22e>address</span>, cap: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> MintCapability<span style=color:#f92672>&lt;</span>NFTMeta<span style=color:#f92672>&gt;</span>, base_meta: <span style=color:#a6e22e>Metadata</span>, type_meta: <span style=color:#a6e22e>NFTMeta</span>, body: <span style=color:#a6e22e>NFTBody</span>): <span style=color:#a6e22e>NFT</span><span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;</span>

<span style=color:#e6db74>/// Burn NFT，return NFTBody in the NFT
</span><span style=color:#e6db74></span>public fun burn_with_cap<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(cap: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> BurnCapability<span style=color:#f92672>&lt;</span>NFTMeta<span style=color:#f92672>&gt;</span>, nft: <span style=color:#a6e22e>NFT</span><span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;</span>): <span style=color:#a6e22e>NFTBody</span> 

<span style=color:#e6db74>/// Update NFT&#39;s metadata
</span><span style=color:#e6db74></span>public fun update_meta_with_cap<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(cap: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> UpdateCapability<span style=color:#f92672>&lt;</span>NFTMeta<span style=color:#f92672>&gt;</span>, nft: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> NFT<span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;</span>, base_meta: <span style=color:#a6e22e>Metadata</span>, type_meta: <span style=color:#a6e22e>NFTMeta</span>)
</code></pre></div><p>The above lists the basic methods related to NFT, and NFT how to store, how to transfer, this is not the NFT module itself care about things, is the function of NFTGallery.</p><h2 id=nftgallery>NFTGallery</h2><p>NFTGallery module provides the basic functions that users use to collect and store NFT. It contains the following methods:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust>
  <span style=color:#e6db74>/// Init a NFTGallery to accept NFT&lt;NFTMeta, NFTBody&gt; for `sender`
</span><span style=color:#e6db74></span>public fun accept<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(sender: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>signer</span>);

<span style=color:#e6db74>/// Transfer NFT from `sender` to `receiver`
</span><span style=color:#e6db74></span>public fun transfer<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(sender: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>signer</span>, id: <span style=color:#66d9ef>u64</span>, receiver: <span style=color:#a6e22e>address</span>);

<span style=color:#e6db74>/// Get the all NFT info
</span><span style=color:#e6db74></span>public fun get_nft_infos<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(owner: <span style=color:#a6e22e>address</span>): <span style=color:#a6e22e>vector</span><span style=color:#f92672>&lt;</span>NFT::NFTInfo<span style=color:#f92672>&lt;</span>NFTMeta<span style=color:#f92672>&gt;&gt;</span>;

<span style=color:#e6db74>/// Deposit nft to `sender` NFTGallery
</span><span style=color:#e6db74></span>public fun deposit<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(sender: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>signer</span>, nft: <span style=color:#a6e22e>NFT</span><span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;</span>);

<span style=color:#e6db74>/// Deposit nft to `receiver` NFTGallery
</span><span style=color:#e6db74></span>public fun deposit_to<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(receiver: <span style=color:#a6e22e>address</span>, nft: <span style=color:#a6e22e>NFT</span><span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;</span>);

<span style=color:#e6db74>/// Withdraw one nft of NFTMeta from `sender`, caller should ensure at least one NFT in the Gallery.
</span><span style=color:#e6db74></span>public fun withdraw_one<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(sender: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>signer</span>): <span style=color:#a6e22e>NFT</span><span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;</span>;

<span style=color:#e6db74>/// Withdraw nft of NFTMeta and id from `sender`
</span><span style=color:#e6db74></span>public fun withdraw<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(sender: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>signer</span>, id: <span style=color:#66d9ef>u64</span>): Option<span style=color:#f92672>&lt;</span>NFT<span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;&gt;</span>;

</code></pre></div><p>NFTGallery provides a generic space for storing and querying NFT, of course, developers can also design their own NFT storage module.</p><h2 id=extensions>Extensions</h2><h3 id=custom-metadata>Custom Metadata</h3><p>If the developer needs to add a custom metadata, you can define it in the NFTMeta type, for example, to define a video NFT, you need to add a video url.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>VideoNFT</span> has copy, store, drop {
  video_url: <span style=color:#a6e22e>vector</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u8</span><span style=color:#f92672>&gt;</span>,
}
<span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>VideoNFTBody</span> has store{}
</code></pre></div><p>The actual NFT data format is equivalent to.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>NFT</span>{
  creator: <span style=color:#a6e22e>address</span>,
  id: <span style=color:#66d9ef>u64</span>,
  base_meta: <span style=color:#a6e22e>Metadata</span>,
  type_meta: <span style=color:#a6e22e>VideoNFT</span>,
  body: <span style=color:#a6e22e>VideoNFTBody</span>,
}
</code></pre></div><h3 id=nested-nftbody>Nested NFTBody</h3><p>If the developer wants to embed additional resources in the NFT, this can be done by way of a custom Body, for example, in the VideoNFTBody above where we wants to embed some Token:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>VideoNFTBody</span> has store{
  token: <span style=color:#a6e22e>Token</span><span style=color:#f92672>&lt;</span>STC<span style=color:#f92672>&gt;</span>,
}
</code></pre></div><h3 id=custom-transfer>Custom transfer</h3><p>There are NFT application scenarios, NFT transfer is restricted, such as as membership credentials. In this case, a custom NFT storage is needed to implement a custom transfer method. The NFT stored in the NFTGallery is fully controlled by the user, and the NFT developer cannot restrict its use and transfer.</p><p>Take IdentifierNFT as an example, IdentifierNFT is a kind of NFT container, which guarantees that each user can only have one NFT of the same type and cannot be transferred by the user after the NFT developer grants the user an NFT, which is generally used in user identity-related NFT scenarios, such as medals of honor.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#e6db74>/// IdentifierNFT contains an Option&lt;NFT&gt;, which is empty by default, which is equivalent to a box that can hold NFT 
</span><span style=color:#e6db74></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>IdentifierNFT</span><span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span> has key {
        nft: Option<span style=color:#f92672>&lt;</span>NFT<span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;&gt;</span>,
}

<span style=color:#e6db74>/// The user uses the `accept` method to initialize an empty IdentifierNFT under his account 
</span><span style=color:#e6db74></span>public fun accept<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(sender: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>signer</span>) {
  move_to(sender, IdentifierNFT<span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;</span> {
    nft: Option::none(),
  });
}

<span style=color:#e6db74>/// The developer grants the nft to the receiver by MintCapability and embeds the nft into the IdentifierNFT 
</span><span style=color:#e6db74></span>public fun grant_to<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(_cap: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> MintCapability<span style=color:#f92672>&lt;</span>NFTMeta<span style=color:#f92672>&gt;</span>, receiver: <span style=color:#a6e22e>address</span>, nft: <span style=color:#a6e22e>NFT</span><span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;</span>) acquires IdentifierNFT {
     <span style=color:#66d9ef>let</span> id_nft <span style=color:#f92672>=</span> borrow_global_mut<span style=color:#f92672>&lt;</span>IdentifierNFT<span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;&gt;</span>(receiver);
     Option::fill(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> id_nft.nft, nft);
}

<span style=color:#e6db74>/// Developers can also take out the NFT in the `owner` IdentifierNFT by BurnCapability 
</span><span style=color:#e6db74></span>public fun revoke<span style=color:#f92672>&lt;</span>NFTMeta: <span style=color:#a6e22e>copy</span> <span style=color:#f92672>+</span> store <span style=color:#f92672>+</span> drop, NFTBody: <span style=color:#a6e22e>store</span><span style=color:#f92672>&gt;</span>(_cap: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> BurnCapability<span style=color:#f92672>&lt;</span>NFTMeta<span style=color:#f92672>&gt;</span>, owner: <span style=color:#a6e22e>address</span>): <span style=color:#a6e22e>NFT</span><span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;</span>  acquires IdentifierNFT {
     <span style=color:#66d9ef>let</span> id_nft <span style=color:#f92672>=</span> move_from<span style=color:#f92672>&lt;</span>IdentifierNFT<span style=color:#f92672>&lt;</span>NFTMeta, NFTBody<span style=color:#f92672>&gt;&gt;</span>(owner);
     <span style=color:#66d9ef>let</span> IdentifierNFT { nft } <span style=color:#f92672>=</span> id_nft;
     Option::destroy_some(nft)
}
</code></pre></div><p>In the above scenario, the NFTMeta definition and the registered developer can programmatically define the transfer logic of the NFT (of course, it is possible to disallow the transfer).</p><h2 id=example-usage-scenarios>Example usage scenarios</h2><h3 id=nft-game-props>NFT game props</h3><p>One advantage of using the NFT in Move to define game props is that you can define multiple NFT types in the same Module, and you can also define the combination of props, such as:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#e6db74>/// The player combines two L1 cards into a new L2 card   
</span><span style=color:#e6db74></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>L1Card</span> has store {}
<span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>L2Card</span> has store {
     first: <span style=color:#a6e22e>L1Card</span>,
     second: <span style=color:#a6e22e>L1Card</span>,
 }
</code></pre></div><p>For a more detailed example see <a href=https://github.com/starcoinorg/starcoin/blob/master/vm/functional-tests/tests/testsuite/nft/nft_card.move>nft_card.move</a></p><h3 id=nft-as-membership>NFT as membership</h3><p>A user pays the membership fee to become a member, the membership fee is locked in the NFT. When the user performs a membership action or quit, the membership is checked for expiration and the membership fee is deducted according to the join time. For a more detailed example, see <a href=https://github.com/starcoinorg/starcoin/blob/master/vm/functional-tests/tests/testsuite/nft/identifier_nft.move>identifier_nft.move</a></p><h3 id=nft-as-shopping-credentials>NFT as shopping credentials</h3><p>Users directly mint NFTs by paying Token and then exchange NFTs for physical goods. Users also can trade NFTs between themselves. for a more detailed example,see <a href=https://github.com/starcoinorg/starcoin/blob/master/vm/functional-tests/tests/testsuite/nft/nft_boxminer.move>nft_boxminer.move</a></p><h3 id=distribute-nfts-via-merkletree-proofs>Distribute NFTs via MerkleTree proofs</h3><p>The NFT developer defines the NFT and submits the MerkleTree root on the chain, and the user takes the NFT proof and mint it by themselves.</p><p>Starcoin&rsquo;s GenesisNFT is minted in this way. GenesisNFT is distributed to the addresses of accounts that participated in Barnard network mining before the starcoin mainnet was launched.</p><p>The parent_hash(0x0f2fdd39d11dc3d25f21d05078783d476ff98ca4035320e5932bb3938af0e827) of the main network&rsquo;s genesis block points to the block on the Barnard network with a height of 310,000. All addresses on the Barnard network that have minted blocks prior to this height can mint a GenesisNFT.</p><p>For details, see <a href=https://github.com/starcoinorg/starcoin/blob/master/vm/stdlib/modules/GenesisNFT.move>GenesisNFT.move</a> <a href=https://github.com/starcoinorg/starcoin/blob/master/vm/stdlib/modules/MerkleNFT.move>MerkleNFT.move</a></p><h2 id=differences-between-starcoin-nft-standard-and-erc721erc1155>Differences between Starcoin NFT standard and ERC721/ERC1155</h2><ol><li>ERC721/ERC1155 is Interface and does not define the implementation, extensibility is achieved through different implementations. The Starcoin NFT standard contains implementations of data types and basic operations, and extensibility is achieved through upper-level combinations.</li><li>By default, Starcoin NFT, similar to ERC721, is not fungible. However, third parties can extend the splitting and merging logic to achieve the purpose of ERC1155.</li><li>The NFT of ERC721/ERC1155 can only be moved within the contract, and cannot be moved from the contract to another contract, so the agreement combination on the NFT is very difficult. Thanks to the type feature of Move, the NFT in Starcoin can be moved between different contracts, and other contracts can define new types to encapsulate the NFT and expand new transfer logic (such as auctions). This brings great convenience to the protocol design on the NFT, and can combine a lot of gameplay.</li><li>ERC721/ERC1155 distinguishes NFT types by contract address. To implement multiple NFTs, multiple contracts need to be deployed. If there are many types of NFTs, contract calls will be very complicated.</li><li>Starcoin&rsquo;s NFT is stored in the user&rsquo;s state space, and all of the user&rsquo;s NFTs can be displayed by listing the resources of the user&rsquo;s state space, including NFTs embedded in other resource. This brings great convenience to ecological tools, such as displaying NFTs in wallets or block explorer, or the auction market.</li></ol></article></div></div></div></div><div class="footer visible-lg"><div class=container><div class="row hr"><div class="col-md-6 item logo-container"><a href=/en><div class=logo><img src=/img/logo.png></div></a>© 2018-2021 Starcoin.org</div><div class="col-md-3 item">Technology</div><div class="col-md-3 item">Community</div></div><div class="row td"><div class="col-md-6 item"></div><div class="col-md-3 item"><a target=_blank href="https://chrome.google.com/webstore/detail/starmask/mfhbebgoclkghebffdldpobeajmbecfk?hl=zh-CN">StarMask Wallet</a></div><div class="col-md-3 item"><a target=_blank href=https://starcoin.org/en/news/>News</a></div></div><div class="row td"><div class="col-md-6 item"></div><div class="col-md-3 item"><a target=_blank href=https://stcscan.io>Blockchain Explorer</a></div><div class="col-md-3 item"><a target=_blank href=https://westar.io>Westar Labs</a></div></div><div class="row td"><div class="col-md-6 item"></div><div class="col-md-3 item"><a target=_blank href=https://starcoin.org/en/developer/>Developer Docs</a></div><div class="col-md-3 item"><a target=_blank href=https://www.movelang.io>Move Chinese Community</a></div></div><div class="row td"><div class="col-md-6 item contact-container"><span data-toggle=tooltip data-placement=bottom title="WeChat Public Account: Starcoin区块链"><img src=/img/footer/wechat@2x.png></span>
<span data-toggle=tooltip data-placement=bottom title="Twitter: StarcoinSTC"><a href=https://twitter.com/starcoinstc target=_blank><img src=/img/footer/twitter@2x.png></a></span>
<span data-toggle=tooltip data-placement=bottom title="Join WeChat Group: starcoinorg"><img src=/img/footer/wechat_group@2x.png></span>
<span data-toggle=tooltip data-placement=bottom title="Discord: Starcoin Spaceship"><a href=https://discord.gg/96tKt5exaE target=_blank><img src=/img/footer/discord@2x.png></span></div><div class="col-md-3 item"><a target=_blank href=https://starcoin.org/en/developer/sdk/>SDK</a></div><div class="col-md-3 item"><a target=_blank href=https://github.com/starcoinorg/starcoin/discussions>GitHub Discussion</a></div></div></div></div><div class="m-footer visible-xs visible-sm visible-md"><div class=container><div class=go-contact-us>Technology</div><div class=row-li><div class=item><a target=_blank href="https://chrome.google.com/webstore/detail/starmask/mfhbebgoclkghebffdldpobeajmbecfk?hl=zh-CN">StarMask Wallet</a></div><div class=item><a target=_blank href=https://stcscan.io>Blockchain Explorer</a></div><div class=item><a target=_blank href=https://starcoin.org/en/developer/>Developer Docs</a></div><div class=item><a target=_blank href=https://starcoin.org/en/developer/sdk/>SDK</a></div></div><div class=go-contact-us>Community</div><div class=row-li><div class=item><a target=_blank href=https://starcoin.org/en/news/>News</a></div><div class=item><a target=_blank href=https://westar.io>Westar Labs</a></div><div class=item><a target=_blank href=https://www.movelang.io>Move Chinese Community</a></div><div class=item><a target=_blank href=https://github.com/starcoinorg/starcoin/discussions>GitHub Discussion</a></div></div><div class=go-contact-us>Contact Us</div><div class=row-li><div class=item>WeChat Public Account: Starcoin区块链</div><div class=item>Join WeChat Group: starcoinorg</div></div><div class=row-li><div class=item><a target=_blank href=https://twitter.com/starcoinstc>Twitter: StarcoinSTC</a></div><div class=item><a target=_blank href=https://discord.gg/96tKt5exaE>Discord: Starcoin Spaceship</a></div></div><div class=crt>© 2018-2021 Starcoin.org</div></div></div></body></html>