<!doctype html><html lang=zh><head><meta charset=utf-8><meta content="width=device-width;initial-scale=1;maximum-scale=1;user-scalable=0" name=viewport><meta id=i18n_pagename content="index-common"><link rel=icon type=image/svg href=/img/stc.svg><link rel=stylesheet type=text/css href=/css/bootstrap.css><link rel=stylesheet href=/css/swiper-bundle.css><link rel=stylesheet type=text/css href=/css/nav.css><link rel=stylesheet type=text/css href=/css/nav_developer.css><link rel=stylesheet type=text/css href=/css/banner.css><link rel=stylesheet type=text/css href=/css/footer.css><link rel=stylesheet type=text/css href=/css/developer.css><link rel=stylesheet type=text/css href=/css/markdown.css><script src=/js/jquery.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/swiper-bundle.min.js></script><script>(function(c,d){const b=196;function a(){const c=document.documentElement.clientWidth/1920,a=b*Math.min(c,2);document.documentElement.style.fontSize=a+'px',console.log('resize',document.documentElement.clientWidth,document.documentElement.clientHeight,'fontSize',a)}addEventListener('resize',a,!1),a()})(document,window)</script><script>$(document).ready(function(){a(),$(window).resize(function(){a()});function a(){navigator.userAgent.match(/mobile/i)?($(".m-d-title").css("width",document.body.clientWidth-30+'px'),$(".m-d-content").css("width",document.body.clientWidth-30+'px')):($(".m-d-title").css("width","auto"),$(".m-d-content").css("width","auto"))}$("#developer_open_move").click(function(){$(this).parent().attr("class").indexOf("active")>-1?($(this).find(".icon img").attr("src","/img/icon_block.png"),$(this).parent().removeClass("active")):($(this).find(".icon img").attr("src","/img/icon_block_active.png"),$(this).parent().addClass("active"))}),$(".m_left_nav_click").click(function(){$(this).attr("state")==0?($(this).attr("state",1),$(".m_mask").show(),$(".m-column-drawer").animate({marginLeft:"100px"})):($(this).attr("state",0),$(".m_mask").hide(),$(".m-column-drawer").animate({marginLeft:"-212px"}))}),$(".m_mask").click(function(){$(this).hide(),$(".m_left_nav_click").attr("state",0),$(".m-column-drawer").animate({marginLeft:"-212px"})})})</script><title>Move 示例 | Starcoin 开发者</title></head><body><div class=visible-lg-block><div class=header_top></div><div class="top scrollTop-nav"><div class=container><a href=/zh><div class=logo><img src=/img/logo.png></div></a><div class="nav navClick"><div class="item Overview allSelect"><a class=i18n href=/zh/>首页</a><div class=more_nav><div class=box><div class=li><a class=i18n href=/zh/developer/sips/sip-2/>技术白皮书</a></div><div class=li><a class=i18n href=/zh/developer/sips/sip-3/>经济模型白皮书</a></div></div></div></div><div class="item Guide allSelect"><span class=i18n>使用指南</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/zh/learn/install>钱包安装指南</a></div><div class=li><a class=i18n onclick="return window.open('https://github.com/starcoinorg/starmask-extension/blob/main/docs/how-to-use.md',''),!1" href=javascript:void(0)>Starmask 使用指南</a></div><div class=li><a class=i18n href=/zh/developer/cli/mint/>节点挖矿指南</a></div><div class=li><a class=i18n href=/zh/developer/cli/>节点命令指南</a></div></div></div></div><div class="item Developer allSelect"><span class=i18n>开发者</span><div class=more_nav><div class=box><div class=li><span class=i18n>Node</span><div class=second_nav><div class=li><a class=i18n href=/zh/developer/key_concepts/concept>关键概念</a></div><div class=li><a class=i18n href=/zh/developer/rpc/rpc_document/>RPC 协议</a></div><div class=li><a class=i18n href=/zh/developer/sips/>SIPs</a></div><div class=li><a class=i18n href=/zh/developer/sdk/>SDK</a></div></div></div><div class=li><span class=i18n>Move</span><div class=second_nav><div class=li><a class=i18n onclick="return window.open('https://move-book.com/cn/index.html',''),!1" href=javascript:void(0)>Move 开发指南</a></div><div class=li><a class=i18n href=/zh/developer/move/1.2/changelog>Move 1.2 更新</a></div><div class=li><a class=i18n onclick="return window.open(' https://github.com/starcoinorg/starcoin/blob/master/vm/move-cli/README.md',''),!1" href=javascript:void(0)>Move IDE</a></div><div class=li><a class=i18n onclick="return window.open('https://github.com/starcoinorg/starcoin/blob/master/vm/move-cli/README.zh.md',''),!1" href=javascript:void(0)>Move CLI</a></div><div class=li><a class=i18n href=/zh/developer/move/example>Move 合约示例</a></div></div></div><div class=li><span class=i18n>矿池接入</span><div class=second_nav><div class=li><a class=i18n onclick="return window.open('https://github.com/starcoinorg/starcoin/discussions/2541',''),!1" href=javascript:void(0)>矿池接入</a></div><div class=li><a class=i18n onclick="return window.open('https://github.com/starcoinorg/starcoin/blob/b47429fc792fe9fabd1587fa60a9cae249f0b67f/stratum/stratum_mining_protocol.md',''),!1" href=javascript:void(0)>层开采协议</a></div></div></div><div class=li><a class=i18n href=/zh/developer/>更多</a></div></div></div></div><div class="item Community allSelect"><span class=i18n>社区</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/zh/news/>新闻</a></div><div class=li><a class=i18n onclick="return window.open('http://westar.io',''),!1" href=javascript:void(0)>Westar 实验室</a></div><div class=li><a class=i18n onclick="return window.open('https://www.movelang.io',''),!1" href=javascript:void(0)>Move 中文社区</a></div></div></div></div><div class="item QA allSelect"><span class=i18n>问答</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/zh/qa/ama>AMA</a></div></div></div></div><div class="item About allSelect"><span class=i18n>关于</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/zh/about>关于 Starcoin</a></div></div></div></div></div><div class="language p-language"><span language=en>English</span>｜<span language=zh>中文</span></div></div></div></div><div class="visible-xs visible-sm visible-md" style=display:none><div class="header_top m_header_top"></div><div class="top m_top scrollTop-nav"><div class="container m_container"><a href=/><div class=m_logo><img src=/img/logo.png></div></a><div class="m_nav m_nav_tap"><img src=/img/m_nav_more.png></div></div></div><div class=m_nav_model><div class="nav navClick m_nav_navigation"><div class="item Overview allSelect"><a class=i18n href=/zh/>首页</a><div class=more_nav><div class=box><div class=li><a class=i18n href=/zh/developer/sips/sip-2/>技术白皮书</a></div><div class=li><a class=i18n href=/zh/developer/sips/sip-3/>经济模型白皮书</a></div></div></div></div><div class="item Guide allSelect"><span class=i18n>使用指南</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/zh/learn/install>钱包安装指南</a></div><div class=li><a class=i18n onclick="return window.open('https://github.com/starcoinorg/starmask-extension/blob/main/docs/how-to-use.md',''),!1" href=javascript:void(0)>Starmask 使用指南</a></div><div class=li><a class=i18n href=/zh/developer/cli/mint/>节点挖矿指南</a></div><div class=li><a class=i18n href=/zh/developer/cli/>节点命令指南</a></div></div></div></div><div class="item Developer allSelect"><span class=i18n>开发者</span><div class=more_nav><div class=box><div class=li><span class=i18n>Node</span><div class=second_nav><div class=li><a class=i18n href=/zh/developer/key_concepts/concept>关键概念</a></div><div class=li><a class=i18n href=/zh/developer/rpc/rpc_document/>RPC 协议</a></div><div class=li><a class=i18n href=/zh/developer/sips/>SIPs</a></div><div class=li><a class=i18n href=/zh/developer/sdk/>SDK</a></div></div></div><div class=li><span class=i18n>Move</span><div class=second_nav><div class=li><a class=i18n onclick="return window.open('https://move-book.com/cn/index.html',''),!1" href=javascript:void(0)>Move 开发指南</a></div><div class=li><a class=i18n href=/zh/developer/move/1.2/changelog>Move 1.2 更新</a></div><div class=li><a class=i18n onclick="return window.open(' https://github.com/starcoinorg/starcoin/blob/master/vm/move-cli/README.md',''),!1" href=javascript:void(0)>Move IDE</a></div><div class=li><a class=i18n onclick="return window.open('https://github.com/starcoinorg/starcoin/blob/master/vm/move-cli/README.zh.md',''),!1" href=javascript:void(0)>Move CLI</a></div><div class=li><a class=i18n href=/zh/developer/move/example>Move 合约示例</a></div></div></div><div class=li><span class=i18n>矿池接入</span><div class=second_nav><div class=li><a class=i18n onclick="return window.open('https://github.com/starcoinorg/starcoin/discussions/2541',''),!1" href=javascript:void(0)>矿池接入</a></div><div class=li><a class=i18n onclick="return window.open('https://github.com/starcoinorg/starcoin/blob/b47429fc792fe9fabd1587fa60a9cae249f0b67f/stratum/stratum_mining_protocol.md',''),!1" href=javascript:void(0)>层开采协议</a></div></div></div><div class=li><a class=i18n href=/zh/developer/>更多</a></div></div></div></div><div class="item Community allSelect"><span class=i18n>社区</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/zh/news/>新闻</a></div><div class=li><a class=i18n onclick="return window.open('http://westar.io',''),!1" href=javascript:void(0)>Westar 实验室</a></div><div class=li><a class=i18n onclick="return window.open('https://www.movelang.io',''),!1" href=javascript:void(0)>Move 中文社区</a></div></div></div></div><div class="item QA allSelect"><span class=i18n>问答</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/zh/qa/ama>AMA</a></div></div></div></div><div class="item About allSelect"><span class=i18n>关于</span><div class=more_nav><div class=box><div class=li><a class=i18n href=/zh/about>关于 Starcoin</a></div></div></div></div></div><div class=m-language><div language=zh class=item>中文<div class=line></div></div><div language=en class=item>English</div></div></div><div class=clearfix></div></div><script>$(document).ready(function(){const a=JSON.parse(localStorage.getItem('navActive'))||0;$(".navClick .item")[a].classList.add('navActive'),$(".p-language span, .m-language .item").click(function(){let a=window.location.href,b=$(this).attr('language'),c="zh";c!==b&&(a=a.replace(`/${c}/`,`/${b}/`),window.location.href=a)}),$(".navClick .item").click(function(){let b=$(this)[0]||null;if(b){b.classList.add('navActive');let e=[],d=b.parentNode.children;for(var a=0,c=d.length;a<c;a++)d[a]!==b?e.push(d[a]):localStorage.setItem('navActive',a);e.forEach(a=>{a.classList.remove('navActive')})}$(this).attr("href")&&window.open($(this).attr("href"),"_self")}),$(".more_nav .box .li").click(function(){$(this).attr("href")&&window.open($(this).attr("href"),"_self")}),$(".m_nav_navigation").find(".allSelect").click(function(){$(this).attr("class").indexOf("m_tab_select")>-1?(console.log($(this)),$(this).removeClass("m_tab_select")):$(this).addClass("m_tab_select")}),$(".m_nav_tap").click(function(){$(this).find("img").attr("src")=="/img/m_nav_more.png"?($(this).find("img").attr("src","/img/m_nav_close.png"),$(".m_nav_model").show(),$(".m_nav_model").animate({height:"100%"}),$(".scrollTop-nav").addClass("home-nav")):($(this).find("img").attr("src","/img/m_nav_more.png"),$(".scrollTop-nav").removeClass("home-nav"),$(".m_nav_model").animate({height:"0%"}),$(".m_nav_model").hide())})})</script><div class=container><div class="developer m-column-drawer"><div class=developer_left><div class=developer_column>Starcoin 开发者</div><div class=developer_column_list><ul><li><a href=/zh/developer/setup/>从这里开始</a><ul><li><a href=/zh/developer/setup/install/>安装</a></li><li><a href=/zh/developer/setup/build/>从源码构建</a></li><li><a href=/zh/developer/setup/run_by_docker/>通过 docker 运行</a></li><li><a href=/zh/developer/setup/runnetwork/>运行/加入网络</a></li><li><a href=/zh/developer/setup/runcustomnetwork/>运行自定义的区块链网络</a></li></ul></li><li><a href=/zh/developer/cli/ class=arrow>命令行工具</a></li><li><a href=/zh/developer/tutorials/ class=arrow>教程</a></li><li><a href=/zh/developer/move/ class=arrow>Move 语言</a><ul><li><a href=/zh/developer/move/1.2/changelog/>Move 1.2 更新</a></li><li><a href=/zh/developer/move/example/ class=active>Move 示例</a></li></ul></li><li><a href=/zh/developer/key_concepts/ class=arrow>关键概念</a></li><li><a href=/zh/developer/rpc/ class=arrow>RPC</a></li><li><a href=/zh/developer/release-notes/ class=arrow>版本记录</a></li><li><a href=/zh/developer/sdk/>SDK</a><ul></ul></li><li><a href=/zh/developer/tech/ class=arrow>技术</a></li><li><a href=/zh/developer/sips/ class=arrow>SIPs</a></li></ul></div></div><div class=developer_right><label for=menu-control class="hidden book-menu-overlay"></label><div class=m_mask></div><div class="column_title m-d-title"><img class=m_left_nav_click state=0 src=/img/m_nav_more.png>
<span>Move 示例</span></div><div class="content m-d-content"><article class=markdown><p><br></p><h2 id=helloworld>HelloWorld</h2><ol><li>定义一个Event</li></ol><pre><code class=language-move data-lang=move>struct AnyWordEvent has drop, store {
    words: vector&lt;u8&gt;,
}
</code></pre><ol start=2><li>定义一个Holder</li></ol><pre><code class=language-move data-lang=move>struct EventHolder has key {
    any_word_events: Event::EventHandle&lt;AnyWordEvent&gt;,
}
</code></pre><ol start=3><li>在函数中生成hello world的event</li></ol><pre><code class=language-move data-lang=move>let hello_world = x&quot;68656c6c6f20776f726c64&quot;;//hello world
let holder = borrow_global_mut&lt;EventHolder&gt;(addr);
Event::emit_event&lt;AnyWordEvent&gt;(&amp;mut holder.any_word_events, AnyWordEvent { words:hello_world });
</code></pre><p>完整代码</p><pre><code class=language-move data-lang=move>module Hello {
    use 0x1::Signer;
    use 0x1::Event;

    struct AnyWordEvent has drop, store {
        words: vector&lt;u8&gt;,
    }

    struct EventHolder has key {
        any_word_events: Event::EventHandle&lt;AnyWordEvent&gt;,
    }

    public(script) fun hello(account: &amp;signer) acquires EventHolder {
        let addr = Signer::address_of(account);
        if (!exists&lt;EventHolder&gt;(copy addr)){
            move_to(account, EventHolder {
                any_word_events: Event::new_event_handle&lt;AnyWordEvent&gt;(account),
            });
        };
        let hello_world = x&quot;68656c6c6f20776f726c64&quot;;//hello world
        let holder = borrow_global_mut&lt;EventHolder&gt;(addr);
        Event::emit_event&lt;AnyWordEvent&gt;(&amp;mut holder.any_word_events, AnyWordEvent { words:hello_world });
    }
}
</code></pre><h2 id=stdlib整体介绍>Stdlib整体介绍</h2><p>Stdlib是Starcoin非常重要的一个特性，包含了一些基本模块、常用模块、区块和共识相关的模块。</p><ol><li><p>基础模块：</p><ol><li>Account：账号模块；</li><li>Token：资产模块，定义了Token规范；</li><li>STC：STC是Starcoin的原始资产，是Token的一个实现；</li><li>Timestamp：时间戳模块，取Block的时间作为链上时间；</li><li>Event：事件处理模块；</li><li>Math：数学运算模块；</li><li>Errors：异常处理模块；</li><li>Vector：数组模块；</li></ol></li><li><p>常用模块如下：</p><ol><li>Config：配置模块，例如区块奖励模块RewardConfig、VMConfig等等，将各种配置文件存储到链上，方便未来调整；</li><li>Dao：链上治理模块；</li><li>TwoPhase：两阶段更新Module；</li></ol></li><li><p>区块和共识相关模块：</p><ol><li>Genesis：创世交易；</li><li>Block：区块元数据；</li><li>Epoch：周期；</li></ol></li></ol><p>下面通过一些简单的案例，介绍一下Stdlib常用的操作。</p><h2 id=账号基本操作>账号基本操作</h2><ol><li>Create account</li></ol><pre><code class=language-move data-lang=move>let auth_key = x&quot;91e941f5bc09a285705c092dd654b94a7a8e385f898968d4ecfba49609a13461&quot;;
let account_address = Account::create_account&lt;STC&gt;(auth_key);
</code></pre><ol start=2><li>Get authentication key with address</li></ol><pre><code class=language-move data-lang=move>let auth_key = Account::authentication_key(account_address);
</code></pre><ol start=3><li>Get address from authentication key</li></ol><pre><code class=language-move data-lang=move>let auth_key = x&quot;91e941f5bc09a285705c092dd654b94a7a8e385f898968d4ecfba49609a13461&quot;;
let expected_address = Authenticator::derived_address(auth_key);
</code></pre><ol start=6><li>Get balance</li></ol><pre><code class=language-move data-lang=move>let balance = Account::balance&lt;STC&gt;(account_address);
</code></pre><ol start=7><li>Get sequence number</li></ol><pre><code class=language-move data-lang=move>let sequence_number = Account::sequence_number(account_address);
</code></pre><ol start=8><li>Deposit</li></ol><pre><code class=language-move data-lang=move>let coin = Token::mint&lt;STC&gt;(&amp;account, 100);
Account::deposit(account_address, coin);
</code></pre><ol start=9><li>判断WithdrawCapability是否被代理</li></ol><pre><code class=language-move data-lang=move>let is_delegated = Account::delegated_withdraw_capability(account_address);
</code></pre><ol start=10><li>获取对应WithdrawCapability的address</li></ol><pre><code class=language-move data-lang=move>let with_cap = Account::extract_withdraw_capability(&amp;account);
let account_address = Account::withdraw_capability_address(&amp;with_cap);
</code></pre><h2 id=账号操作权限capability>账号操作权限Capability</h2><p>在Starcoin里，针对账号的任何修改，例如转账、更新key等等，都需要有操作账号的权限。Capability可以理解为Move里对「权限」的一个抽象，不同类型的操作对应不同类型的Capability，例如MintCapability、WithdrawCapability等等。使用Capability做相应的操作，通常有3步：</p><ol><li>获取对应的Capability：extract_xxx_capability</li><li>进行操作</li><li>存储Capability：restore_xxx_capability</li></ol><p>下面是使用Capability操作账号的一些例子(以此类推，其他的Module的更新权限也可以这么设计)：</p><ol><li>Change authentication key</li></ol><pre><code class=language-move data-lang=move>let rot_cap = Account::extract_key_rotation_capability(&amp;account);//1. get capability
Account::rotate_authentication_key_with_capability(&amp;rot_cap, x&quot;123abc&quot;);//2. change key
Account::restore_key_rotation_capability(rot_cap);//3. restore capability
</code></pre><ol start=2><li>Pay from capability</li></ol><pre><code class=language-move data-lang=move>let with_cap = Account::extract_withdraw_capability(&amp;account);//1. get capability
Account::pay_from_capability&lt;STC&gt;(&amp;with_cap, payee, 10000, x&quot;&quot;);//2. pay from capability
Account::restore_withdraw_capability(with_cap);//3. restore capability
</code></pre><p>上面是两个典型的例子，其他更多类似的账号操作还有：withdraw_with_capability等等。</p><h2 id=合约转账的多种方式>合约转账的多种方式</h2><ol><li>peer_to_peer</li></ol><pre><code class=language-move data-lang=move>TransferScripts::peer_to_peer&lt;STC&gt;(account, payee, payee_auth_key, amount);
</code></pre><ol start=2><li>peer_to_peer_with_metadata</li></ol><pre><code class=language-move data-lang=move>TransferScripts::peer_to_peer_with_metadata&lt;STC&gt;(account, payee, payee_auth_key, amount, metadata);
</code></pre><ol start=3><li>批量转账不同amount</li></ol><pre><code class=language-move data-lang=move>TransferScripts::batch_peer_to_peer&lt;STC&gt;(account, payeees, payee_auth_keys, amounts);
</code></pre><ol start=4><li>批量转账相同amount</li></ol><pre><code class=language-move data-lang=move>TransferScripts::peer_to_peer_batch&lt;STC&gt;(account, payeees, payee_auth_keys, amount);
</code></pre><h2 id=多签账号>多签账号</h2><ol><li>3个账号创建1个多签账号</li></ol><pre><code class=language-move data-lang=move>let pubkey1 = x&quot;c48b687a1dd8265101b33df6ae0b6825234e3f28df9ecb38fb286cf76dae919d&quot;;
let pubkey2 = x&quot;4b2a60883383be0ba24ed79aa5a6c9379728099a7b0c57edcec193a14ea5fce2&quot;;
let pubkey3 = x&quot;323285d3d4b0f19482730c5f481d9f745c2927d73c231bad47859d9b2f7376f1&quot;;

let keys = Vector::empty&lt;vector&lt;u8&gt;&gt;();
Vector::push_back(&amp;mut keys, pubkey1);
Vector::push_back(&amp;mut keys, pubkey2);
Vector::push_back(&amp;mut keys, pubkey3);

let t = Authenticator::create_multi_ed25519(copy keys, 1);
t = Authenticator::create_multi_ed25519(copy keys, 2);
t = Authenticator::create_multi_ed25519(copy keys, 3);
let auth_key = Authenticator::multi_ed25519_authentication_key(&amp;t);
</code></pre><ol start=2><li>获取多签账号地址</li></ol><pre><code class=language-move data-lang=move>let account_address = Authenticator::derived_address(auth_key);
</code></pre><h2 id=token例子>Token例子</h2><ol><li>发布Token流程
<img src=./move_samples/TokenSample.png alt=TokenSample style=zoom:95% align=left>
<code>1. 定义Token：struct MyToken has copy, drop, store { }</code></li></ol><p><code>2. 注册Token：Token::register_token&lt;MyToken>(account,3);</code></p><p><code>3. 接收Token：Account::accept_token&lt;MyToken>(&account);</code></p><p><code>4. 挖Token：let tokens = Token::mint&lt;MyToken>(&account, total);</code></p><p><code>5. 保存Token：Account::deposit_to_self&lt;MyToken>(&account, tokens);</code></p><p>完整代码</p><pre><code class=language-move data-lang=move>module MyToken {
     use 0x1::Token;
     use 0x1::Account;

     struct MyToken has copy, drop, store { }

     public(script) fun init(account: &amp;signer) {
         Token::register_token&lt;MyToken&gt;(account, 3);
         Account::do_accept_token&lt;MyToken&gt;(account);
     }

     public(script) fun mint(account: &amp;signer, amount: u128) {
        let token = Token::mint&lt;MyToken&gt;(account, amount);
        Account::deposit_to_self&lt;MyToken&gt;(account, token)
     }
}
</code></pre><ol start=2><li>转Token
<img src=./move_samples/TokenTransfer.png alt=TokenSample style=zoom:100% align=left></li></ol><p><code>1. 接收Token：Account::accept_token&lt;MyToken>(&account);</code></p><p><code>2. 转发Token：Account::pay_from&lt;MyToken>(&account, payee, amount);</code></p><h2 id=合约托管>合约托管</h2><ol><li>coder账户部署一个合约，并且将合约托管给Dao</li></ol><pre><code class=language-move data-lang=move>module MyToken {
     use 0x1::Token;
     use 0x1::Account;
     use 0x1::Dao;

     struct MyToken has copy, drop, store { }

     public(script) fun init(account: &amp;signer) {
         Token::register_token&lt;MyToken&gt;(account, 3);
         Account::do_accept_token&lt;MyToken&gt;(account);
         Dao::plugin&lt;MyToken&gt;(account, 60 * 1000, 60 * 60 * 1000, 4, 60 * 60 * 1000);
     }

     public(script) fun mint(account: &amp;signer, amount: u128) {
        let token = Token::mint&lt;MyToken&gt;(account, amount);
        Account::deposit_to_self&lt;MyToken&gt;(account, token)
     }
}
</code></pre><ol start=2><li>修改MyToken模块的Dao配置</li></ol><pre><code class=language-move data-lang=move>script {
    use 0x1::Dao;
    use {{coder}}::MyToken::MyToken;
    use 0x1::Config;

    fun set_dao_config(signer: signer) {
        let cap = Config::extract_modify_config_capability&lt;Dao::DaoConfig&lt;MyToken&gt;&gt;(
            &amp;signer
        );

        Dao::set_voting_delay&lt;MyToken&gt;(&amp;mut cap, 30 * 1000);
        Dao::set_voting_period&lt;MyToken&gt;(&amp;mut cap, 30 * 30 * 1000);
        Dao::set_voting_quorum_rate&lt;MyToken&gt;(&amp;mut cap, 50);
        Dao::set_min_action_delay&lt;MyToken&gt;(&amp;mut cap, 30 * 30 * 1000);

        Config::restore_modify_config_capability(cap);
    }
}
</code></pre><ol start=3><li>升级合约</li></ol><p><img src=https://tva1.sinaimg.cn/large/008i3skNgy1gqxxyln2yxj30p10g5myz.jpg alt=DAO></p></article></div></div></div></div><div class="footer visible-lg"><div class=container><div class="row hr"><div class="col-md-4 item">联系我们</div><div class="col-md-4 item">技术</div><div class="col-md-4 item">社区</div></div><div class="row td"><div class="col-md-4 item">微信公众号: Starcoin区块链</div><div class="col-md-4 item"><a target=_blank href="https://chrome.google.com/webstore/detail/starmask/mfhbebgoclkghebffdldpobeajmbecfk?hl=zh-CN">StarMask
Wallet</a></div><div class="col-md-4 item"><a target=_blank href=https://news.starcoin.org>News 新闻</a></div></div><div class="row td"><div class="col-md-4 item">Twitter: <a target=_blank href=https://twitter.com/starcoinstc>StarcoinSTC</a></div><div class="col-md-4 item"><a target=_blank href=https://explorer.starcoin.org>区块浏览器</a></div><div class="col-md-4 item"><a target=_blank href=https://westar.io>Westar 实验室</a></div></div><div class="row td"><div class="col-md-4 item">加入微信群请加：starcoinorg</div><div class="col-md-4 item"><a target=_blank href=https://developer.starcoin.org>开发者文档</a></div><div class="col-md-4 item"><a target=_blank href=https://www.movelang.io>Move 中文社区</a></div></div><div class="row td"><div class="col-md-4 item">Discord：<a target=_blank href=https://discord.gg/96tKt5exaE>Starcoin Spaceship</a></div><div class="col-md-4 item"><a target=_blank href=https://developer.starcoin.org/zh/sdk/>SDK</a></div><div class="col-md-4 item"><a target=_blank href=https://github.com/starcoinorg/starcoin/discussions>GitHub 讨论区</a></div></div><div class=foot><div class=logo><img src=/img/logo.png></div><div class=copyright>© 2018-2021 Starcoin.org All rights reserved.</div></div></div></div><div class="m-footer visible-xs visible-sm visible-md"><div class=container><div class=go-contact-us>联系我们<img src=/img/r-arrow.png></div><div class=row-li><div class=item>微信公众号: Starcoin区块链</div><div class=item>微信群: starcoinorg</div></div><div class=row-li><div class=item>Twitter: <a target=_blank href=https://twitter.com/starcoinstc>StarcoinSTC</a></div><div class=item>Discord：<a target=_blank href=https://discord.gg/96tKt5exaE>Starcoin Spaceship</a></div></div><div class=go-contact-us>技术<img src=/img/r-arrow.png></div><div class=row-li><div class=item><a target=_blank href="https://chrome.google.com/webstore/detail/starmask/mfhbebgoclkghebffdldpobeajmbecfk?hl=zh-CN">StarMask
Wallet</a></div><div class=item><a target=_blank href=https://explorer.starcoin.org>区块浏览器</a></div></div><div class=row-li><div class=item><a target=_blank href=https://developer.starcoin.org>开发者文档</a></div><div class=item><a target=_blank href=https://developer.starcoin.org/zh/sdk/>SDK</a></div></div><div class=go-contact-us>社区<img src=/img/r-arrow.png></div><div class=row-li><div class=item><a target=_blank href=https://news.starcoin.org>News 新闻</a></div><div class=item><a target=_blank href=https://westar.io>Westar 实验室</a></div></div><div class=row-li><div class=item><a target=_blank href=https://www.movelang.io>Move 中文社区</a></div><div class=item><a target=_blank href=https://github.com/starcoinorg/starcoin/discussions>GitHub 讨论区</a></div></div><div class=copyright><div class=f-logo><img src=/img/logo.png></div></div><div class=crt>© 2018-2021 Starcoin.org All rights reserved.</div></div></div></body></html>